/* frontend/src/components/LabelPreview.css */

.label-preview-wrapper {
  background-color: #f0f4f8;
  padding: 20px; /* فضای کافی برای اینکه خط‌کش‌ها از کادر اصلی بیرون نزنند */
  border-radius: 8px;
  border: 1px solid #dde4ec;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: auto; /* اگر پیش‌نمایش خیلی بزرگ شود */
}

.preview-area-with-rulers {
  /* این نگهدارنده اصلی برای وسط‌چین کردن است */
  display: inline-block; /* باعث می‌شود ابعادش بر اساس محتوا باشد */
}

.label-and-rulers-container {
  position: relative; /* این مبدأ برای خط‌کش‌های absolute است */
  /* ایجاد فاصله از بالا و راست به اندازه ضخامت خط‌کش‌ها */
  padding-top: 20px;
  padding-right: 20px;
  display: inline-block; /* برای اینکه ابعادش متناسب با محتوا باشد */
}

.label-render-area {
  background-color: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* سایه ملایم‌تر */
  box-sizing: border-box;
  padding: 1.5mm;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  overflow: hidden;
  position: relative; /* برای اینکه z-index روی آن کار کند اگر لازم شد */
}

/* ... (بقیه استایل‌های .label-header, .label-footer, .label-body و ... بدون تغییر) ... */
.label-header,
.label-footer {
  flex-shrink: 0;
  text-align: center;
  width: 100%;
}
.label-header {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-bottom: 1mm;
}
.label-footer {
  padding-top: 1mm;
}
.label-body {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  min-height: 0;
  overflow-y: auto;
  text-align: right;
}
.label-body > div {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
  width: 100%;
}
.stone-info-preview {
  font-size: 0.8em;
  opacity: 0.9;
  line-height: 1.2;
  white-space: normal;
}
.price-preview {
  color: #1a237e;
  font-weight: bold;
}
.codes-preview {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  gap: 5px;
  margin-top: auto;
  padding-top: 2px;
  width: 100%;
}
.qr-code-preview canvas {
  max-width: 100%;
  height: auto !important;
}


/* ============== استایل‌های خط‌کش (چسبیده به اتیکت) ============== */

.ruler {
  position: absolute;
  background-color: #e9ecef;
  box-sizing: border-box;
  overflow: visible;
  z-index: 5; /* پایین‌تر از گوشه */
}

.ruler-x {
  height: 20px; /* ضخامت خط‌کش افقی */
  top: 0; /* از بالای .label-and-rulers-container شروع می‌شود */
  right: 20px; /* به اندازه ضخامت خط‌کش عمودی، از راست فاصله می‌گیرد */
  border-bottom: 1px solid #adb5bd;
  background-image: 
    repeating-linear-gradient(to left, #adb5bd, #adb5bd 0.5px, transparent 0.5px, transparent 5mm),
    repeating-linear-gradient(to left, #ced4da, #ced4da 0.5px, transparent 0.5px, transparent 1mm);
}

.ruler-y {
  width: 20px; /* ضخامت خط‌کش عمودی */
  top: 20px; /* به اندازه ضخامت خط‌کش افقی، از بالا فاصله می‌گیرد */
  right: 0; /* از راست .label-and-rulers-container شروع می‌شود */
  border-left: 1px solid #adb5bd;
  background-image: 
    repeating-linear-gradient(to bottom, #adb5bd, #adb5bd 0.5px, transparent 0.5px, transparent 5mm),
    repeating-linear-gradient(to bottom, #ced4da, #ced4da 0.5px, transparent 0.5px, transparent 1mm);
}

/* گوشه بالا-راست */
.ruler-corner {
  position: absolute;
  top: 0;
  right: 0;
  width: 20px;
  height: 20px;
  background-color: #dee2e6;
  z-index: 6; /* بالاتر از خط‌کش‌ها */
  border-left: 1px solid #adb5bd;  /* برای هماهنگی با خط‌کش عمودی */
  border-bottom: 1px solid #adb5bd; /* برای هماهنگی با خط‌کش افقی */
  box-sizing: border-box;
}

.ruler-number {
  position: absolute;
  font-family: 'Tahoma', 'Arial', sans-serif; /* فونت انگلیسی خوانا */
  font-size: 9px;
  color: #333;
  user-select: none;
}

.ruler-x .ruler-number {
  top: 2px;
}
.ruler-x .zero-mark-x {
  right: -3px !important;
}
.ruler-x .end-mark {
  left: -5px !important;
  right: auto !important; 
}

.ruler-y .ruler-number {
  left: 3px;
  /* برای نمایش عمودی اعداد روی خط‌کش عمودی (اختیاری) */
  /* writing-mode: vertical-rl; */
  /* transform: rotate(180deg); */ /* اگر writing-mode استفاده شد */
}
.ruler-y .zero-mark-y {
  top: -7px !important;
}
.ruler-y .end-mark {
  bottom: -7px !important;
  top: auto !important;
}

@media print {
  .preview-area-with-rulers {
    margin: 0;
  }
  .ruler, .ruler-corner {
    display: none !important;
  }
}