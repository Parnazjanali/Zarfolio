/* frontend/src/pages/SettingsPage.css */
:root {
  --sp-page-bg: var(--secondary-bg-color, #f4f7f9);
  --sp-header-text-color: var(--primary-text-color, #2c3e50);

  --sp-tabs-menu-bg: var(--primary-bg-color, #ffffff);
  --sp-tabs-menu-shadow: var(--card-shadow, 0 5px 15px rgba(0,0,0,0.07)); /* Assuming global card shadow */
  --sp-tab-button-text-color: var(--secondary-text-color, #52616B);
  --sp-tab-button-hover-bg: var(--secondary-bg-color, #f8f9fa);
  --sp-tab-button-hover-text-color: var(--accent-color, #007bff);
  --sp-tab-button-active-bg: rgba(var(--focus-ring-color-rgb, 0,123,255), 0.1); /* Light accent */
  --sp-tab-button-active-text-color: var(--accent-color, #007bff);
  --sp-tab-button-active-border-color: var(--accent-color, #007bff);
  --sp-tab-icon-color: var(--secondary-text-color, #869ab0); /* Muted icon */
  --sp-tab-icon-active-color: var(--accent-color, #007bff);

  --sp-content-section-bg: var(--primary-bg-color, #ffffff);
  --sp-content-section-shadow: var(--card-shadow, 0 5px 15px rgba(0,0,0,0.07));
  --sp-section-title-text-color: var(--primary-text-color, #343a40);
  --sp-section-title-border-color: var(--border-color, #e9ecef);
  --sp-section-title-icon-color: var(--accent-color, #007bff);

  --sp-form-label-color: var(--secondary-text-color, #495057);
  --sp-form-label-subtext-color: var(--secondary-text-color, #6c757d);
  /* Inputs, selects, textareas use global styles from index.css */
  --sp-checkbox-label-color: var(--secondary-text-color, #495057);
  --sp-checkbox-accent-color: var(--accent-color, #007bff);

  --sp-actions-border-color: var(--border-color, #e9ecef);
  /* Save button uses global .action-button.primary */
  /* Other action buttons use global .action-button.secondary */

  --sp-feedback-success-bg: var(--success-bg-color, #d1e7dd); /* Global success bg */
  --sp-feedback-success-text: var(--success-text-color, #0f5132); /* Global success text */
  --sp-feedback-success-border: var(--success-border-color, #badbcc); /* Global success border */
  --sp-feedback-error-bg: var(--danger-bg-color, #f8d7da); /* Global danger bg */
  --sp-feedback-error-text: var(--danger-text-color, #58151c); /* Global danger text */
  --sp-feedback-error-border: var(--danger-border-color, #f5c2c7); /* Global danger border */

  --sp-fieldset-bg: var(--secondary-bg-color, #fdfdfd); /* Slightly off-white */
  --sp-fieldset-border-color: var(--border-color, #e0e0e0);
  --sp-fieldset-legend-color: var(--accent-color, #007bff);

  --sp-preview-area-border-color: var(--border-color, #ced4da);
  --sp-preview-area-header-color: var(--secondary-text-color, #495057);
  --sp-preview-placeholder-border-color: var(--border-color, #adb5bd); /* Darker dashed border */
  --sp-preview-placeholder-text-color: var(--secondary-text-color, #6c757d);
  --sp-preview-placeholder-bg-color: var(--secondary-bg-color, #f8f9fa);

  /* Responsive tab menu */
  --sp-responsive-tabs-menu-bg: var(--secondary-bg-color, #f8f9fa);
  --sp-responsive-tabs-border-color: var(--border-color, #dfe4ea);
  --sp-responsive-tab-active-bg: var(--primary-bg-color, #fff);
}

body.dark-mode {
  --sp-page-bg: var(--primary-bg-color, #121212); /* Page is on primary dark */
  --sp-header-text-color: var(--primary-text-color, #e0e0e0);

  --sp-tabs-menu-bg: var(--secondary-bg-color, #1e1e1e); /* Tabs menu distinct */
  --sp-tabs-menu-shadow: 0 5px 15px rgba(0,0,0,0.25);
  --sp-tab-button-text-color: var(--secondary-text-color, #a0aec0);
  --sp-tab-button-hover-bg: var(--border-color, #2c2c2c); /* Use border for subtle hover */
  --sp-tab-button-hover-text-color: var(--accent-color, #bb86fc);
  --sp-tab-button-active-bg: rgba(var(--focus-ring-color-rgb, 187,134,252), 0.15);
  --sp-tab-button-active-text-color: var(--accent-color, #bb86fc);
  --sp-tab-button-active-border-color: var(--accent-color, #bb86fc);
  --sp-tab-icon-color: var(--secondary-text-color, #888);
  --sp-tab-icon-active-color: var(--accent-color, #bb86fc);

  --sp-content-section-bg: var(--secondary-bg-color, #1e1e1e); /* Sections also distinct */
  --sp-content-section-shadow: 0 5px 15px rgba(0,0,0,0.25);
  --sp-section-title-text-color: var(--primary-text-color, #e0e0e0);
  --sp-section-title-border-color: var(--border-color, #3a3a3a);
  --sp-section-title-icon-color: var(--accent-color, #bb86fc);

  --sp-form-label-color: var(--secondary-text-color, #adb5bd);
  --sp-form-label-subtext-color: var(--secondary-text-color, #868e96);
  --sp-checkbox-label-color: var(--secondary-text-color, #adb5bd);
  --sp-checkbox-accent-color: var(--accent-color, #bb86fc);

  --sp-actions-border-color: var(--border-color, #3a3a3a);

  --sp-feedback-success-bg: var(--success-bg-color, rgba(102,187,106,0.15));
  --sp-feedback-success-text: var(--success-text-color, #a5d6a7);
  --sp-feedback-success-border: var(--success-border-color, rgba(102,187,106,0.3));
  --sp-feedback-error-bg: var(--danger-bg-color, rgba(240,113,120,0.15));
  --sp-feedback-error-text: var(--danger-text-color, #f07178);
  --sp-feedback-error-border: var(--danger-border-color, rgba(240,113,120,0.3));

  --sp-fieldset-bg: var(--primary-bg-color, #121212); /* Fieldset blends more with page bg */
  --sp-fieldset-border-color: var(--border-color, #3a3a3a);
  --sp-fieldset-legend-color: var(--accent-color, #bb86fc);

  --sp-preview-area-border-color: var(--border-color, #444);
  --sp-preview-area-header-color: var(--secondary-text-color, #a0aec0);
  --sp-preview-placeholder-border-color: var(--border-color, #555);
  --sp-preview-placeholder-text-color: var(--secondary-text-color, #888);
  --sp-preview-placeholder-bg-color: var(--primary-bg-color, #121212);

  --sp-responsive-tabs-menu-bg: var(--primary-bg-color, #121212);
  --sp-responsive-tabs-border-color: var(--border-color, #3a3a3a);
  --sp-responsive-tab-active-bg: var(--secondary-bg-color, #1e1e1e);
}

.settings-page-container {
  width: 100%;
  padding: 1.5625rem 1.875rem; /* 25px 30px */
  box-sizing: border-box;
  direction: rtl;
  font-family: var(--font-family); /* Global */
  background-color: var(--sp-page-bg);
  min-height: 100vh; /* Ensure page takes full height */
}

.settings-page-header {
  margin-bottom: 1.5625rem; /* 25px */
  padding-bottom: 0.9375rem; /* 15px */
  /* Removed border, often page headers don't have bottom border if content is carded */
}

.settings-page-header h1 {
  font-size: 2em;
  color: var(--sp-header-text-color);
  margin: 0;
  font-weight: 700;
}

.settings-layout {
  display: flex;
  gap: 25px;
  align-items: flex-start;
}

.settings-tabs-menu {
  flex: 0 0 15rem; /* 240px */
  background-color: var(--sp-tabs-menu-bg);
  border-radius: 0.625rem; /* 10px */
  box-shadow: var(--sp-tabs-menu-shadow);
  padding: 0.625rem 0; /* 10px */
  align-self: flex-start;
}

.tab-button {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0.875rem 1.375rem; /* 14px 22px */
  border: none;
  background-color: transparent;
  text-align: right;
  font-family: var(--font-family); /* Global */
  font-size: 0.98em;
  font-weight: 500;
  color: var(--sp-tab-button-text-color);
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease, border-right-color 0.25s ease, padding-right 0.25s ease;
  border-right: 4px solid transparent;
  box-sizing: border-box;
}

.tab-button:hover {
  background-color: var(--sp-tab-button-hover-bg);
  color: var(--sp-tab-button-hover-text-color);
}

.tab-button.active {
  background-color: var(--sp-tab-button-active-bg);
  color: var(--sp-tab-button-active-text-color);
  font-weight: 600;
  border-right-color: var(--sp-tab-button-active-border-color);
  padding-right: 1.125rem; /* 18px */
}

.tab-icon {
  margin-left: 0.75rem; /* 12px */
  font-size: 1.2em;
  width: 1.375rem; /* 22px */
  text-align: center;
  color: var(--sp-tab-icon-color);
  transition: color 0.2s ease;
}
.tab-button:hover .tab-icon,
.tab-button.active .tab-icon {
  color: var(--sp-tab-icon-active-color);
}

.settings-content {
  flex-grow: 1;
}
.feedback-message.top-feedback {
    margin-bottom: 1.25rem; /* 20px */
    margin-top: 0;
}

.settings-section {
  background-color: var(--sp-content-section-bg);
  padding: 1.5625rem 1.875rem 1.875rem 1.875rem; /* 25px 30px 30px 30px */
  border-radius: 0.625rem; /* 10px */
  box-shadow: var(--sp-content-section-shadow);
  margin-bottom: 1.5625rem; /* 25px */
}
.settings-section:last-child {
  margin-bottom: 0;
}

.settings-section-title {
  font-size: 1.35em;
  color: var(--sp-section-title-text-color);
  margin-top: 0;
  margin-bottom: 1.875rem; /* 30px */
  padding-bottom: 0.75rem; /* 12px */
  border-bottom: 1px solid var(--sp-section-title-border-color);
  display: flex;
  align-items: center;
  font-weight: 600;
}
.settings-section-title .section-icon {
  margin-left: 0.75rem; /* 12px */
  font-size: 1.1em;
  color: var(--sp-section-title-icon-color);
}

.form-row {
  display: flex;
  align-items: flex-start;
  margin-bottom: 1.375rem; /* 22px */
  gap: 1.25rem; /* 20px */
}
.form-row:last-child {
  margin-bottom: 0;
}

.form-label {
  flex: 0 0 15rem; /* 240px */
  font-size: 0.9em;
  color: var(--sp-form-label-color);
  font-weight: 500;
  text-align: left; /* For LTR, this should be right if form is RTL */
  padding-left: 0.625rem; /* 10px */
  line-height: 1.5;
  padding-top: 0.5rem; /* 8px */
}
.form-label-subtext {
  display: block;
  font-size: 0.8em;
  color: var(--sp-form-label-subtext-color);
  font-weight: normal;
  margin-top: 0.25rem; /* 4px */
  line-height: 1.4;
}

.form-input-control {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.5rem; /* 8px */
}
.form-input-control.inline-elements {
    flex-direction: row;
    align-items: center;
    gap: 0.625rem; /* 10px */
}

/* Inputs, selects, textareas use global styles from index.css */
.form-input-control input[type="text"],
.form-input-control input[type="tel"],
.form-input-control input[type="email"],
.form-input-control input[type="number"],
.form-input-control input[type="url"],
.form-input-control select,
.form-input-control textarea {
  /* Inherits from global styles in index.css */
  /* Example of specific override IF NEEDED:
     background-color: var(--custom-input-bg, var(--secondary-bg-color));
  */
}
/* Focus styles also from global index.css */

.form-input-control input[type="file"] {
    border: 1px solid var(--border-color);
    border-radius: 0.375rem; /* 6px */
    padding: 0.5rem 0.75rem; /* 8px 12px */
    font-size: 0.85em;
    background-color: var(--secondary-bg-color); /* Match other inputs */
    color: var(--primary-text-color);
}
.form-input-control input[type="color"] {
    padding: 0.125rem; /* 2px */
    height: 2.375rem; /* 38px */
    min-width: 3.125rem; /* 50px */
    border: 1px solid var(--border-color);
    border-radius: 0.375rem; /* 6px */
    background-color: var(--secondary-bg-color); /* Ensure background for picker */
}

.form-input-control textarea {
  min-height: 5rem; /* 80px */
  resize: vertical;
}
.form-input-control input[type="checkbox"] {
  margin-left: 0.3125rem; /* 5px */
  margin-right: 0;
  transform: scale(1.1);
  accent-color: var(--sp-checkbox-accent-color);
  cursor: pointer;
  vertical-align: middle;
}
.checkbox-group {
    display: flex;
    flex-direction: row;
    gap: 0.9375rem; /* 15px */
    flex-wrap: wrap;
    align-items: center;
}
.checkbox-group.vertical {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem; /* 8px */
}
.checkbox-label {
    font-size: 0.9em;
    color: var(--sp-checkbox-label-color);
    cursor: pointer;
    font-weight: normal;
    display: flex;
    align-items: center;
}

.conversion-rates {
    display: flex;
    flex-direction: column;
    gap: 0.5rem; /* 8px */
}
.conversion-rates span {
    display: inline-flex;
    align-items: center;
    gap: 0.3125rem; /* 5px */
    font-size: 0.9em;
    color: var(--primary-text-color); /* Ensure text color is appropriate */
}
.conversion-rates input[type="number"] {
    width: 5.625rem !important; /* 90px */
    padding: 0.375rem 0.5rem !important; /* 6px 8px */
    font-size: 0.9em !important;
    text-align: center;
}

.settings-section-actions {
  margin-top: 2.1875rem; /* 35px */
  padding-top: 1.5625rem; /* 25px */
  border-top: 1px solid var(--sp-actions-border-color);
  text-align: left; /* For LTR button alignment */
}

/* .save-button and .action-button (secondary) should use global .action-button classes */
/* Example usage in JSX: <button className="action-button primary save-button">Save</button> */
/* <button className="action-button secondary">Cancel</button> */
.save-button { /* If specific styling needed beyond .action-button.primary */
  /* Default styling from .action-button.primary in index.css */
  /* Specific overrides here if any */
}
/* .action-button { */ /* If specific styling needed for secondary buttons beyond .action-button.secondary */
  /* Default styling from .action-button.secondary in index.css */
/* } */


.feedback-message { /* General class for feedback banners */
  width: 100%;
  padding: 0.625rem 0.9375rem; /* 10px 15px */
  margin-top: 0.9375rem; /* 15px */
  border-radius: 0.375rem; /* 6px */
  font-size: 0.9em;
  text-align: center;
  box-sizing: border-box;
  border: 1px solid transparent; /* Base for border */
  display: flex; /* For icon and text alignment */
  align-items: center;
  justify-content: center;
  gap: 0.5rem; /* Space between icon and text */
}
.feedback-message.feedback-success { /* More specific class */
  background-color: var(--sp-feedback-success-bg);
  color: var(--sp-feedback-success-text);
  border-color: var(--sp-feedback-success-border);
}
.feedback-message.feedback-error { /* More specific class */
  background-color: var(--sp-feedback-error-bg);
  color: var(--sp-feedback-error-text);
  border-color: var(--sp-feedback-error-border);
}

.settings-fieldset {
  border: 1px solid var(--sp-fieldset-border-color);
  border-radius: 0.5rem; /* 8px */
  padding: 0.9375rem 1.25rem 1.25rem 1.25rem; /* 15px 20px 20px 20px */
  margin-top: 1.25rem; /* 20px */
  margin-bottom: 1.5625rem; /* 25px */
  background-color: var(--sp-fieldset-bg);
}
.settings-fieldset:first-of-type {
    margin-top: 0;
}

.settings-fieldset legend {
  font-size: 1.1em;
  font-weight: 600;
  color: var(--sp-fieldset-legend-color);
  padding: 0 0.625rem; /* 10px */
  margin-right: 0.625rem; /* 10px for RTL */
}

.checkbox-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(12.5rem, 1fr)); /* 200px */
  gap: 0.625rem 0.9375rem; /* 10px 15px */
  margin-top: 0.625rem; /* 10px */
}

.invoice-preview-area {
  margin-top: 1.875rem; /* 30px */
  padding-top: 1.25rem; /* 20px */
  border-top: 1px dashed var(--sp-preview-area-border-color);
}

.invoice-preview-area h4 {
  font-size: 1.1em;
  color: var(--sp-preview-area-header-color);
  margin-bottom: 0.9375rem; /* 15px */
  text-align: center;
}

.invoice-preview-placeholder {
  border: 2px dashed var(--sp-preview-placeholder-border-color);
  border-radius: 0.5rem; /* 8px */
  padding: 3.125rem 1.25rem; /* 50px 20px */
  text-align: center;
  color: var(--sp-preview-placeholder-text-color);
  background-color: var(--sp-preview-placeholder-bg-color);
  min-height: 12.5rem; /* 200px */
  display: flex;
  align-items: center;
  justify-content: center;
}

@media (max-width: 992px) {
  .settings-layout { flex-direction: column; gap: 20px; }
  .settings-tabs-menu { flex: 0 0 auto; width: 100%; display: flex; overflow-x: auto; padding: 0; border-bottom: 1px solid #dfe4ea; border-radius: 8px 8px 0 0; box-shadow: none; background-color: #f8f9fa; }
  .tab-button { flex: 0 0 auto; padding: 12px 18px; border-right-width: 0; border-bottom: 3px solid transparent; border-radius: 0; margin-right: 0; margin-left: 0; white-space: nowrap; position: relative; }
  .tab-button:not(:last-child) { border-left: 1px solid #dfe4ea; }
  .tab-button.active { border-bottom-color: #007bff; border-right-color: transparent; background-color: #fff; color: #007bff; padding-right: 18px; }
  .settings-content { min-height: auto; border-radius: 0 0 8px 8px; }
  .form-row { flex-direction: column; align-items: flex-start; gap: 8px; }
  .form-label { flex-basis: auto; width: 100%; text-align: right; padding-left: 0; padding-top: 0; }
  .form-input-control { width: 100%; }
  .settings-section-actions { text-align: center; }
  .save-button { width: auto; min-width: 150px; }
  .checkbox-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
}

@media (max-width: 576px) {
  .settings-page-container { padding: 20px 15px; }
  .settings-page-header h1 { font-size: 1.6em; }
  .settings-section { padding: 20px 15px; }
  .settings-section-title { font-size: 1.2em; margin-bottom: 20px; }
  .tab-button { font-size: 0.9em; padding: 10px 12px; }
  .tab-icon { margin-left: 8px; font-size: 1em; }
  .form-label { font-size: 0.85em; }
  .form-input-control input, .form-input-control select, .form-input-control textarea { font-size: 0.85em; padding: 8px 10px; }
  .form-input-control.inline-elements { flex-direction: column; align-items: flex-start; gap: 8px; }
  .form-input-control.inline-elements > * { width: 100%; }
  .form-input-control.inline-elements button { margin-right: 0 !important; margin-top: 5px; }
  .conversion-rates { flex-direction: column; align-items: flex-start; gap: 8px; }
  .conversion-rates span { width: 100%; }
  .conversion-rates input[type="number"] { width: 100% !important; }
  .save-button { width: 100%; justify-content: center; font-size: 0.9em; padding: 9px 18px; }
  .settings-fieldset legend { font-size: 1em; }
  .checkbox-grid { grid-template-columns: 1fr; }
  .invoice-preview-placeholder { padding: 30px 15px; }
}